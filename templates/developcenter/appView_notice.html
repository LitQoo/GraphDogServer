{% extends 'appView_base.html' %}
{% block editor %}

<script>
$(document).ready(function() {
	$("body").on('change','#category',function(){
		console.log('change category :'+$(this).val())
		console.log('value :'+$('[name="userdata"]').val())
		userdata = $('[name="userdata"]').last()
		if($(this).val() == "update"){
			userdata.val('{"version":1,"need":1}')	
		}else if($(this).val() == "housead"){
			userdata.val('{"image":"imageurl","storeid":"","aid":""}')	
		}else{
			userdata.val('{}')	
		}

		userdata.trigger('change')

	})
});
</script>

<form action=appView_notice.html method=post>
	<input type=hidden name=aID value={{aID|safe}}>
			title:<input type=text name=title value={{notice.title|safe}}><br>
			category:
			
			<select name='category' id='category'>
				<option value='default'>defalut</option>
				<option value='notice'>notice</option>
				<option value='update'>update</option>
				<option value='housead'>housead</option>
			</select>
			<br>
			content<br>
			<div id='content' class='jsonForm' value='{"defalut":"defalut content","kr":"한국어"}'></div>
			<br><br>
			userdata
			<div id='userdata' class='jsonForm' value='{}'></div>
			<br><br>

			
			<br>
			platform:<select name=platform>
				<option value=ios>ios</option>
				<option value=android>android</option>
				<option value=all>all</option>
			</select> <br>
			<input type=submit value='save'>
</form>
{% endblock %}

{% block list %} 
	{% if msg %}
{{msg}}
	{% else %}
		<table width=100% border=1>
			<tr>
				<td>no</td>
				<td>category</td>
				<td>title</td>
				<td>content</td>
				<td>userdata</td>
				<td>platform</td>
				<td>time</td>
				<td>hit</td>
			</tr>
		{% for notice in noticeList %}
			<tr>
				<td>{{notice.key.id}}</td>
				<td>{{notice.category}}</td>
				<td>{{notice.title}}</td>
				<td>{{notice.content}}</td>
				<td>{{notice.userdata}}</td>
				<td>{{notice.platform}}</td>
				<td>
					{{notice.createTime}}
				</td>
				<td>
					{{notice.count}}
				</td>
			</tr>
		{%endfor%}
	</table>
	{% endif %}
{% endblock %}